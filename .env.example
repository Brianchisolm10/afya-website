# Database
# PostgreSQL connection string for Prisma
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA
# For local development, use localhost
# For production, use your hosted database URL (e.g., Vercel Postgres, Supabase, etc.)
# IMPORTANT: Always use SSL in production by adding ?sslmode=require
DATABASE_URL="postgresql://user:password@localhost:5432/afya?schema=public"

# NextAuth Configuration
# NEXTAUTH_URL: The canonical URL of your site (required for production)
# For local development: http://localhost:3000
# For production: https://yourdomain.com
NEXTAUTH_URL="http://localhost:3000"

# NEXTAUTH_SECRET: A random string used to encrypt tokens and sign cookies
# Generate with: openssl rand -base64 32
# REQUIRED for production
NEXTAUTH_SECRET="your-secret-key-here"

# Email Provider (Nodemailer)
# Configure your SMTP server for sending magic link emails
# Examples: Gmail, SendGrid, AWS SES, Resend, etc.
EMAIL_SERVER_HOST="smtp.example.com"
EMAIL_SERVER_PORT="587"
EMAIL_SERVER_USER="your-email@example.com"
EMAIL_SERVER_PASSWORD="your-email-password"
EMAIL_FROM="noreply@afya.com"

# Webhook Security
# Shared secret for authenticating webhook requests from Google Apps Script
# Generate with: openssl rand -base64 32
# This must match the secret configured in your Google Apps Script
WEBHOOK_SECRET="your-webhook-secret-here"

# Node Environment
# Automatically set by hosting providers, but can be set manually
# NODE_ENV="production"

# ============================================
# OPTIONAL: Monitoring and Error Tracking
# ============================================

# Sentry (Error Tracking and Performance Monitoring)
# Get your DSN from https://sentry.io
# SENTRY_DSN="https://your-key@sentry.io/your-project-id"
# SENTRY_AUTH_TOKEN="your-sentry-auth-token"
# SENTRY_ORG="your-organization"
# SENTRY_PROJECT="your-project"

# Vercel Analytics (if deploying to Vercel)
# Automatically enabled in Vercel dashboard
# NEXT_PUBLIC_VERCEL_ANALYTICS_ID="your-analytics-id"

# ============================================
# OPTIONAL: Caching (Redis)
# ============================================

# Redis URL for caching question blocks, intake paths, etc.
# Format: redis://user:password@host:port
# REDIS_URL="redis://localhost:6379"

# ============================================
# OPTIONAL: File Storage (AWS S3)
# ============================================

# AWS S3 for storing packet PDFs
# AWS_ACCESS_KEY_ID="your-access-key-id"
# AWS_SECRET_ACCESS_KEY="your-secret-access-key"
# AWS_REGION="us-east-1"
# AWS_S3_BUCKET="afya-packets"

# ============================================
# OPTIONAL: Job Queue (External Service)
# ============================================

# If using external job queue service (e.g., AWS SQS, Google Cloud Tasks)
# JOB_QUEUE_URL="your-queue-url"
# JOB_QUEUE_ACCESS_KEY="your-access-key"
# JOB_QUEUE_SECRET_KEY="your-secret-key"

# ============================================
# OPTIONAL: Alerting (Slack/Discord)
# ============================================

# Slack webhook for critical alerts
# SLACK_WEBHOOK_URL="https://hooks.slack.com/services/YOUR/WEBHOOK/URL"

# Discord webhook for alerts
# DISCORD_WEBHOOK_URL="https://discord.com/api/webhooks/YOUR/WEBHOOK/URL"

# ============================================
# OPTIONAL: Log Aggregation
# ============================================

# Logtail (BetterStack) for log aggregation
# LOGTAIL_SOURCE_TOKEN="your-logtail-token"

# Datadog for APM and logging
# DD_API_KEY="your-datadog-api-key"
# DD_SITE="datadoghq.com"

# ============================================
# OPTIONAL: AI/LLM Integration
# ============================================

# OpenAI for AI-powered packet generation
# OPENAI_API_KEY="sk-your-openai-api-key"
# OPENAI_MODEL="gpt-4"

# Anthropic Claude for AI-powered packet generation
# ANTHROPIC_API_KEY="your-anthropic-api-key"
# ANTHROPIC_MODEL="claude-3-opus-20240229"

# ============================================
# Payment Processing (Stripe)
# ============================================

# Stripe API Keys
# Get these from https://dashboard.stripe.com/apikeys
# Use test keys (sk_test_... and pk_test_...) for development
# Use live keys (sk_live_... and pk_live_...) for production
STRIPE_SECRET_KEY="sk_test_your_stripe_secret_key_here"
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_your_stripe_publishable_key_here"

# Stripe Webhook Secret
# Get this from https://dashboard.stripe.com/webhooks after creating a webhook endpoint
# Used to verify webhook signatures for security
STRIPE_WEBHOOK_SECRET="whsec_your_webhook_secret_here"

# Application URL (used for Stripe redirects and webhooks)
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# ============================================
# Feature Flags
# ============================================

# Enable/disable shop functionality
NEXT_PUBLIC_SHOP_ENABLED="true"

# Enable/disable gear drive submissions
NEXT_PUBLIC_GEAR_DRIVE_ENABLED="true"

# Enable/disable equipment donation (coming soon feature)
NEXT_PUBLIC_EQUIPMENT_DONATION_ENABLED="false"

# Enable/disable community stats counter
NEXT_PUBLIC_COMMUNITY_STATS_ENABLED="true"

# Enable/disable donation allocation requirement at checkout
NEXT_PUBLIC_DONATION_ALLOCATION_REQUIRED="true"

# Enable/disable real-time updates for community counter
NEXT_PUBLIC_REALTIME_UPDATES_ENABLED="false"

# ============================================
# Production Settings
# ============================================

# Rate limiting (requests per minute per IP)
RATE_LIMIT_MAX_REQUESTS="100"
RATE_LIMIT_WINDOW_MS="60000"

# Session configuration
SESSION_MAX_AGE="2592000" # 30 days in seconds
SESSION_UPDATE_AGE="86400" # 1 day in seconds

# Cache TTL (Time To Live) in seconds
CACHE_TTL_PRODUCTS="300" # 5 minutes
CACHE_TTL_COMMUNITY_STATS="60" # 1 minute
CACHE_TTL_CONTENT="3600" # 1 hour

# Image optimization
NEXT_PUBLIC_IMAGE_QUALITY="85"
NEXT_PUBLIC_IMAGE_FORMATS="webp,avif"

# Performance monitoring
ENABLE_PERFORMANCE_MONITORING="false"
PERFORMANCE_SAMPLE_RATE="0.1" # 10% of requests

# Security headers
ENABLE_SECURITY_HEADERS="true"
ENABLE_CSP="true"

# Logging level (error, warn, info, debug)
LOG_LEVEL="info"

# Enable debug mode (verbose logging, detailed errors)
DEBUG_MODE="false"
